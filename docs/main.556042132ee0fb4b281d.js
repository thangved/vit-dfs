"use strict";(self.webpackChunkmaze=self.webpackChunkmaze||[]).push([[179],{88:(t,e,s)=>{const i=class{constructor(t=[[]],e=[0,0],s=[t.length-1,t[0].length-1]){this.map=t,this.start=e,this.target=s,this.hashed={},this.steps=[],this.path=[]}isGoal(t=[]){return t[0]===this.target[0]&&t[1]===this.target[1]}distance(t,e){return Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2))}findNextStates(t){const e=[];return t[1]&&!this.map[t[0]][t[1]-1]&&e.push([t[0],t[1]-1]),t[1]==this.map[0]?.length-1||this.map[t[0]][t[1]+1]||e.push([t[0],t[1]+1]),t[0]&&!this.map[t[0]-1][t[1]]&&e.push([t[0]-1,t[1]]),t[0]==this.map.length-1||this.map[t[0]+1][t[1]]||e.push([t[0]+1,t[1]]),e.sort(((t,e)=>this.distance(t,this.target)-this.distance(e,this.target)))}dfs(t=this.start){if(this.path.push(t),this.isGoal(t))return this.steps.push({current:t,nextStates:[]}),!0;this.hashed[t[0]]||(this.hashed[t[0]]={}),this.hashed[t[0]][t[1]]=!0;const e=this.findNextStates(t),s={current:t,nextStates:[],pops:[]};this.steps.push(s);for(const t of e)if((!this.hashed[t[0]]||!this.hashed[t[0]][t[1]])&&(s.nextStates.push(t),this.dfs(t)))return!0;return this.steps.push({current:t,nextStates:[],pops:[t]}),this.path.pop(),!1}startDfs(){return this.path=[],this.steps=[],this.hashed={},this.dfs()}},a=s.p+"dff4f75ea1b2918eb572b22e31776eee.mp3",h=s.p+"1410a48041d5794e34358a9696b4611c.mp3",n=s.p+"96d28abc64c4561be07df7da092789e5.mp3",r=s.p+"9b5b1a6223e1057f889880c41f2a324e.wav",l=s.p+"2604a56c761e9cbfc005832e0193974c.wav",o=new class{constructor(t,e=new i,{cellSize:s,delay:o}={}){this.audio=new class{constructor(){this.swimming=new Audio(a),this.theme=new Audio(h),this.return=new Audio(n),this.win=new Audio(r),this.click=new Audio(l),this.theme.loop=!0}},this.element=t,this.init(e,{cellSize:s,delay:o})}init(t=new i,{cellSize:e=50,delay:s=500}={}){try{this.audio.theme.play()}catch(t){}clearInterval(this.interval),this.cellSize=e,this.maze=t,this.current=t.start,this.delay=s,this.element.innerHTML="",this.element.innerHTML+=`<div class="maze-flag" style="width: ${this.cellSize}px; height: ${this.cellSize}px; top: ${this.cellSize*this.maze.target[0]}px; left: ${this.cellSize*this.maze.target[1]}px"></div>`;for(const t of this.maze.map){const e=document.createElement("div");e.classList.add("maze-row");for(const s of t)e.innerHTML+=`<div class="maze-cell${s?" maze-grass":""}" style="width: ${this.cellSize}px; height: ${this.cellSize}px;"></div>`;this.element.append(e)}this.character=document.createElement("div"),this.character.classList.add("maze-character"),this.character.style.width=this.cellSize+"px",this.character.style.height=this.cellSize+"px",this.element.append(this.character),this.render()}render(){this.character.style.top=this.cellSize*this.current[0]+"px",this.character.style.left=this.cellSize*this.current[1]+"px"}goto(t){this.current=t,this.render()}drawRect(t=[],e="maze-next"){this.element.querySelectorAll(".maze-row")[t[0]].querySelectorAll(".maze-cell")[t[1]].classList.add(e)}drawRects(t=[],e){t.forEach((t=>this.drawRect(t,e)))}play(){this.audio.theme.pause(),clearInterval(this.interval),this.drawRect(this.current),this.maze.startDfs();const t=this.maze.steps,e=this.maze.path;console.log(e),this.interval=setInterval((()=>{const s=t.shift();if(!s)return this.audio.win.play(),clearInterval(this.interval),void(this.interval=setInterval((()=>{const t=e.pop();if(!t)return clearInterval(this.interval);this.drawRect(t,"maze-success")}),this.delay/10));s.pops?.length?this.audio.return.play():this.audio.swimming.play(),this.goto(s.current),this.drawRects(s.nextStates,"maze-next"),this.drawRects(s.pops,"maze-pop")}),this.delay)}}(document.getElementById("maze-game"));function c(t,e,s){const{map:a,start:h,target:n,rows:r,cols:l}=function(t=10,e=10){const s=new class{constructor(t,e){this.width=t,this.height=e,this.cols=2*this.width+1,this.rows=2*this.height+1,this.maze=this.initArray([]),this.maze.forEach(((t,e)=>{if(t.forEach(((t,s)=>{switch(e){case 0:case this.rows-1:this.maze[e][s]=["wall"];break;default:e%2==1?0!=s&&s!=this.cols-1||(this.maze[e][s]=["wall"]):s%2==0&&(this.maze[e][s]=["wall"])}})),0==e){let t=this.posToSpace(this.rand(1,this.width));this.maze[e][t]=["door","exit"]}if(e==this.rows-1){let t=this.posToSpace(this.rand(1,this.width));this.maze[e][t]=["door","entrance"]}})),this.partition(1,this.height-1,1,this.width-1)}initArray(t){return new Array(this.rows).fill().map((()=>new Array(this.cols).fill(t)))}rand(t,e){return t+Math.floor(Math.random()*(1+e-t))}posToSpace(t){return 2*(t-1)+1}posToWall(t){return 2*t}inBounds(t,e){return void 0!==this.maze[t]&&void 0!==this.maze[t][e]}shuffle(t){for(let e=t.length-1;e>0;e--){const s=Math.floor(Math.random()*(e+1));[t[e],t[s]]=[t[s],t[e]]}return t}partition(t,e,s,i){let a,h,n,r,l,o;if(e<t||i<s)return!1;t==e?a=t:(n=t+1,r=e-1,l=Math.round(n+(r-n)/4),o=Math.round(n+3*(r-n)/4),a=this.rand(l,o)),s==i?h=s:(n=s+1,r=i-1,l=Math.round(n+(r-n)/3),o=Math.round(n+2*(r-n)/3),h=this.rand(l,o));for(let n=this.posToWall(t)-1;n<=this.posToWall(e)+1;n++)for(let t=this.posToWall(s)-1;t<=this.posToWall(i)+1;t++)n!=this.posToWall(a)&&t!=this.posToWall(h)||(this.maze[n][t]=["wall"]);let c=this.shuffle([!0,!0,!0,!1]);if(c[0]){let t=this.rand(s,h);this.maze[this.posToWall(a)][this.posToSpace(t)]=[]}if(c[1]){let t=this.rand(h+1,i+1);this.maze[this.posToWall(a)][this.posToSpace(t)]=[]}if(c[2]){let e=this.rand(t,a);this.maze[this.posToSpace(e)][this.posToWall(h)]=[]}if(c[3]){let t=this.rand(a+1,e+1);this.maze[this.posToSpace(t)][this.posToWall(h)]=[]}this.partition(t,a-1,s,h-1),this.partition(a+1,e,s,h-1),this.partition(t,a-1,h+1,i),this.partition(a+1,e,h+1,i)}isGap(...t){return t.every((t=>{let e,s;return[e,s]=t,!(this.maze[e][s].length>0&&!this.maze[e][s].includes("door"))}))}countSteps(t,e,s,i,a){return!!this.inBounds(e,s)&&!(t[e][s]<=i)&&!!this.isGap([e,s])&&(t[e][s]=i,!!this.maze[e][s].includes(a)||(this.countSteps(t,e-1,s,i+1,a),this.countSteps(t,e,s+1,i+1,a),this.countSteps(t,e+1,s,i+1,a),void this.countSteps(t,e,s-1,i+1,a)))}getKeyLocation(){let t=this.initArray(),e=this.initArray();this.totalSteps=-1;for(let s=1;s<this.cols-1;s++)this.maze[this.rows-1][s].includes("entrance")&&this.countSteps(t,this.rows-1,s,0,"exit"),this.maze[0][s].includes("exit")&&this.countSteps(e,0,s,0,"entrance");let s=-1,i=-1;return this.maze.forEach(((a,h)=>{a.forEach(((a,n)=>{if(void 0===t[h][n])return;let r=t[h][n]+e[h][n];r>this.totalSteps&&(i=h,s=n,this.totalSteps=r)}))})),[i,s]}placeKey(){let t,e;[t,e]=this.getKeyLocation(),this.maze[t][e]=["key"]}display(t){if(this.parentDiv=document.getElementById(t),!this.parentDiv)return alert('Cannot initialise maze - no element found with id "'+t+'"'),!1;for(;this.parentDiv.firstChild;)this.parentDiv.removeChild(this.parentDiv.firstChild);const e=document.createElement("div");return e.id="maze",e.dataset.steps=this.totalSteps,this.maze.forEach((t=>{let s=document.createElement("div");t.forEach((t=>{let e=document.createElement("div");t&&(e.className=t.join(" ")),s.appendChild(e)})),e.appendChild(s)})),this.parentDiv.appendChild(e),!0}}(e,t);let i=null,a=null;const h=[];for(let t=0;t<s.maze[0].length;t++){h.push([]);for(let e=0;e<s.maze.length;e++){const n=s.maze[e][t].length;2!==n?h[t].push(n):(h[t].push(0),e?a=[t,e]:i=[t,e])}}return{map:h,start:i,target:a,rows:s.rows,cols:s.cols}}(t,e),c=new i(a,h,n);o.init(c,{cellSize:Math.min((document.body.offsetHeight-80)/l,(document.body.offsetWidth-80)/r),delay:s})}function d(){c(Number(document.getElementById("maze-width").nextElementSibling.value),Number(document.getElementById("maze-height").nextElementSibling.value),Number(document.getElementById("maze-delay").nextElementSibling.value))}c(),document.getElementById("maze-accept").addEventListener("click",d),document.getElementById("maze-play").addEventListener("click",o.play.bind(o)),document.getElementById("maze-login-play-btn").addEventListener("click",(()=>{o.audio.click.play(),setTimeout((()=>{document.getElementById("maze-login").classList.add("hide"),d()}),200)})),window.toggleModal=function(){document.querySelector(".modal").classList.toggle("show")}}},t=>{t(t.s=88)}]);